function [cargs,copts] = pruning_args(varargin)
% These arguments are for determining connections and initial weights based on the developmental / pruning procedure

  [cargs,copts] = uber_args( ...
            'ac.ct.iters_per',   {[10 10 10 10] [10 10 10 3]}, ...
            'ac.ct.steps',     {[8 8 4 2] [2 1 1 1]}, ...
            ...'ac.ct.iters_per',   {[10 10 5 5] [5 5 10 10]}, ...
            ...'ac.ct.steps',     {[8 4 2 1] [8 4 2 1]}, ...
            'ac.ct.dataset','natimg',...
            'ac.ct.npruning_loops', 4, ... %the rest of the loops in iters_per are training only
            'ac.ct.prune_loc', 'input', ...
            'ac.ct.prune_strategy', 'weights', ...
            'ac.ct.keep_weights', true, ...
            'ac.ct.ac.nzc_ok', false, ... %non-zero connections ok
            ...
            'ac.ct.ac.AvgError',  0, ...
            'ac.ct.ac.TrainMode', 'resilient', ...
            'ac.ct.ac.Pow',       1, ...
            'ac.ct.ac.EtaInitInit', 2E-2, ...%.4, ...
            'ac.ct.ac.Acc',       5E-5, ...
            'ac.ct.ac.Dec',       0.25, ...
            'ac.ct.ac.lambda',    0.00, ...
            varargin{:}, ...
            'sigma', 20*[1 1] ...
          );


  % stolen
  cargs = { 'ac.ct.nConnPerHidden_Start',   2*argval(cargs,'nConns'), ...
            'ac.ct.nConnPerHidden_End',     argval(cargs,'nConns'), ...
            'ac.ct.sigma',                  argval(cargs,'sigma'), ...
            'ac.ct.ac.XferFn',              argval(cargs,'ac.XferFn'), ...
            'ac.ct.ac.zscore',              argval(cargs,'ac.zscore'), ...
            'ac.ct.ac.wlim',                argval(cargs,'ac.wlim'), ...
            'ac.ct.ac.WeightInitType',      argval(cargs,'ac.WeightInitType'), ...
            'ac.ct.ac.WeightInitScale',     argval(cargs,'ac.WeightInitScale'), ...
            'ac.ct.ac.noise_input',         0.001, ...argval(cargs,'ac.noise_input'), ...
            'ac.ct.ac.avgact',              argval(cargs,'ac.avgact'), ...
            'ac.ct.data.opt', copts, ...
             cargs{:} ...
           };

function val = argval(args,str,subidx)
%

  argidx = find(guru_findstr(args,str)==1,1,'last');
  if isempty(argidx), error('%s not found in arglist; must be present to push to pruning ac.', str); end;

  val = args{argidx+1};
  if exist('subidx','var'), val = val(subidx); end;
